<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Metrics Hazelcast Documentation</title>
    <link rel="canonical" href="http://localhost:5000/hazelcast/4.1/deploy/metrics.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
<link rel="stylesheet" href="../../../_/css/search.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-M267KFN"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','GTM-M267KFN')</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="http://localhost:5000">Hazelcast Documentation</a>
        <div class="navbar-item">
          <input id="search-input" type="text" placeholder="Search docs">
        </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Hazelcast IMDG</a>
            <a class="navbar-item" href="#">Hazelcast Jet</a>
            <a class="navbar-item" href="#">Hazelcast Cloud</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Learn</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Docs</a>
            <a class="navbar-item" href="#">Online Training</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Demos</a>
            <a class="navbar-item" href="#">Community</a>
            <a class="navbar-item" href="#">Blog</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Get Hazelcast</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="hazelcast" data-version="4.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../hazelcast_overview.html">Hazelcast IMDG</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../hazelcast_overview.html">Overview</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../get-started/getting_started.html">Get Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../get-started/glossary.html">Glossary</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../develop/hazelcast_clients.html">Develop Solutions</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../develop/jcache.html">JCache</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../develop/performance.html">Performance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../develop/serialization.html">Serialization</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../develop/striim_cdc.html">Striim Hot Cache</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../develop/transactions.html">Transactions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../develop/distributed_query.html">Distributed Query</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../develop/distributed_sql.html">Distributed SQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../develop/distributed_events.html">Distributed Events</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../develop/distributed_computing.html">Distributed Computing</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="installing_upgrading.html">Deploy Clusters</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="starting_members_clients.html">Starting Members and Clients</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="setting_up_clusters.html">Setting Up Clusters</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="management.html">Management</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="security.html">Security</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="simulator.html">Hazelcast Simulator</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="wan.html">WAN Replication</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="network_partitioning.html">Network Partitioning</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../migrate/migration_guides.html">Migrate</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../troubleshoot/common_exception_types.html">Troubleshooting</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../reference/faq.html">Reference</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/dds.html">Distributed data structures</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/system_properties.html">System properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/understanding_configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/phone_homes.html">Phone homes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/hazelcast_plugins.html">Plugins</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../contribute/extending_hazelcast.html">Contribute</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../contribute/licenses.html">Licenses</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../contribute/revision_history.html">Documentation changes</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Hazelcast IMDG</span>
    <span class="version">4.1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Hazelcast IMDG</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../hazelcast_overview.html">4.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Home</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../home/index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../home/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../hazelcast_overview.html">Hazelcast IMDG</a></li>
    <li><a href="metrics.html">Metrics</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a class="git" href="file:///C:/Users/Jake%20Cahill/Documents/code-playground/docs/hazelcast-docs/modules/deploy/pages/metrics.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<article class="doc">
<h1 class="page">Metrics</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Metrics are <code>&lt;string,value&gt;</code> key-value pairs of data that
capture the runtime information about the members and clients
in a Hazelcast cluster. Such a metric can be the number of
entries stored in a particular IMap on a given member, JVM metrics
like used heap, OS metrics like load average, and so on.
The metrics system is responsible for collecting these metrics
and making them available for the <a href="#metric-consumers">consumers</a> of the metrics.
There are a few hundred metrics collected during every metrics collection cycle
by default, but the number of metrics grows as more features and data structures are used.
This is because every data structure provides its own metrics.
For example, if there are two IMaps used in a cluster, both IMaps produce their metrics on every member.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="metrics-configuration"><a class="anchor" href="#metrics-configuration"></a>Configuring Metrics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can configure the metrics system declaratively or programmatically.
The following is an example declarative configuration with the
default values, on the member side:</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;metrics enabled="true"&gt;
    &lt;management-center enabled="true"&gt;
        &lt;retention-seconds&gt;5&lt;/retention-seconds&gt;
    &lt;/management-center&gt;
    &lt;jmx enabled="true"/&gt;
    &lt;collection-frequency-seconds&gt;5&lt;/collection-frequency-seconds&gt;
&lt;/metrics&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">metrics:
    enabled: true
    management-center:
      enabled: true
      retention-seconds: 5
    jmx:
      enabled: true
    collection-frequency-seconds: 5</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that all of the metrics configuration values can be overridden with system properties.
The properties are are listed below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>hazelcast.metrics.enabled</code>: Enables the metrics collection if set to <code>true</code>, disables it otherwise.</p>
</li>
<li>
<p><code>hazelcast.metrics.mc.enabled</code>: Enables buffering the collected metrics for Management Center if set to <code>true</code>, disables it otherwise.</p>
</li>
<li>
<p><code>hazelcast.metrics.mc.retention</code>: Duration, in seconds, for which the metrics are retained for Management Center.</p>
</li>
<li>
<p><code>hazelcast.metrics.jmx.enabled</code>: Enables exposing the collected metrics over JMX if set to <code>true</code>, disables it otherwise.</p>
</li>
<li>
<p><code>hazelcast.metrics.collection.frequency</code>: Frequency, in seconds, of the metrics collection cycle.</p>
</li>
<li>
<p><code>hazelcast.metrics.debug.enabled</code>: Enables collecting debug metrics if set to <code>true</code>, disables
it otherwise. Note that this can be set with system property only and is meant to
be enabled only if diagnostics is enabled, since currently only diagnostics feature consumes the debug metrics.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The client configuration is very similar, it just lacks the Management Center configuration block
(<code>management-center</code> configuration element), as shown below. This is because the clients are
not connected to Management Center and the client metrics are sent to
Management Center through a member to which the client is connected.</p>
</div>
<div class="listingblock primary">
<div class="title">XML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;metrics enabled="true"&gt;
    &lt;jmx enabled="true"/&gt;
    &lt;collection-frequency-seconds&gt;5&lt;/collection-frequency-seconds&gt;
&lt;/metrics&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary">
<div class="title">YAML</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">metrics:
    enabled: true
    jmx:
      enabled: true
    collection-frequency-seconds: 5</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similarly to the member configuration, the client metrics configuration can be overridden with the following system properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>hazelcast.client.metrics.enabled</code>: Enables the metrics collection if set to <code>true</code>, disables it otherwise.</p>
</li>
<li>
<p><code>hazelcast.client.metrics.jmx.enabled</code>: Enables exposing the collected metrics over JMX if set to <code>true</code>, disables it otherwise.</p>
</li>
<li>
<p><code>hazelcast.client.metrics.collection.frequency</code>: Frequency, in seconds, of the metrics collection cycle.</p>
</li>
<li>
<p><code>hazelcast.client.metrics.debug.enabled</code>: Enables collecting debug metrics if set to <code>true</code>,
disables it otherwise. Note that this can be set with system property only
and is meant to be enabled only if diagnostics is enabled, since currently only diagnostics
feature consumes the debug metrics.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_metric_consumers"><a class="anchor" href="#_metric_consumers"></a>Metric Consumers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Metrics are part of and consumed by the following Hazelcast tools
and interfaces:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Management Center</p>
</li>
<li>
<p>JMX</p>
</li>
<li>
<p>Diagnostics</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_management_center"><a class="anchor" href="#_management_center"></a>Management Center</h3>
<div class="paragraph">
<p>Management Center receives the metrics used for building its view
about the Hazelcast cluster from the metrics system.
The members collect their metrics with the frequency defined with
<code>collection-frequency-seconds</code>, which is by default once in every 5 seconds.
Then it saves the collected metrics into a blob stored in an in-memory buffer.
The blob then is retained for the time configured in the <code>retention-seconds</code> under the
<code>management-center</code> configuration block.
This is also 5 seconds by default, which means there is at most one blob stored by default.
Management Center periodically reads out the metrics from this buffer,
which frees up the heap occupied by the blob once it is consumed.</p>
</div>
<div class="paragraph">
<p>As mentioned earlier, the client metrics are also stored in these
blobs on the member side with timestamps assigned to them on the client side.</p>
</div>
</div>
<div class="sect2">
<h3 id="_jmx"><a class="anchor" href="#_jmx"></a>JMX</h3>
<div class="paragraph">
<p>The metrics are available on the JMX interface of the Hazelcast members and clients.
The metrics are exposed under <code>com.hazelcast/$INSTANCE_NAME/Metrics</code> where
<code>$INSTANCE_NAME</code> is the name of the member or client instance to which the JMX client
is connected.</p>
</div>
</div>
<div class="sect2">
<h3 id="metrics-diagnostics"><a class="anchor" href="#metrics-diagnostics"></a>Diagnostics</h3>
<div class="paragraph">
<p>There are no diagnostics related settings in the metrics configuration section.
See the
<a href="#diagnostics-metrics">Metrics section</a> of the Diagnostics for the details.</p>
</div>
</div>
<div class="sect2">
<h3 id="_version_compatibility"><a class="anchor" href="#_version_compatibility"></a>Version Compatibility</h3>
<div class="paragraph">
<p>Note that the metric names may change between MINOR versions but not between PATCH versions.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_notes_on_the_performance"><a class="anchor" href="#_notes_on_the_performance"></a>Notes on the Performance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The metrics system is designed with care to make
the least possible impact on the performance of the cluster.
Since the metrics collection takes place periodically
with a few seconds frequency, the main focus is keeping
allocation rates and memory footprint at minimum.
Therefore, the blobs that store the metrics for
Management Center are stored in the memory in a compressed format.
The measurements, that use multiple IMaps to scale up the number of
metrics, show that one blob occupies only a few KBs and it grows
above 10KB only if there are more than 1000 IMaps.</p>
</div>
<div class="paragraph">
<p>The allocation rate of a metric collection cycle is also low.
With both Management Center and JMX consumers enabled, the allocation
rate with 100 IMaps is below 256KB per cycle, and it grows above
1MB with 1000 IMaps. This means that metrics collection does not
increase the frequency of the garbage collection (GC) noticeably.</p>
</div>
<div class="paragraph">
<p>While the metrics collection is considered GC friendly, it
should be noted that the blobs are not recycled: configuring the
retention time should be done with taking the frequency of the
GC into account to prevent the blobs from getting promoted
into the tenured region of the heap that in the end contributes
to major GCs after time.</p>
</div>
</div>
</div>
</article>
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<link rel="shortcut icon" href="http://hazelcast.com/images/favicon.png">
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/vendor/search.js" id="search-script" data-base-path="../../.." data-page-path="/hazelcast/4.1/deploy/metrics.html"></script>
<script async src="../../../_/../search-index.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
